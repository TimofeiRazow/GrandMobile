# PlayerInputService Integration - Advanced Gameplay System

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ –≤ Unity –ø—Ä–æ–µ–∫—Ç–µ —Å **–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–º –ò–ò**, **–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏**, **–Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –ø–æ NavMesh** –∏ **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏** –¥–ª—è –∏–≥—Ä—ã –≤ —Å—Ç–∏–ª–µ "–ú–∞—Ñ–∏—è"/"Among Us".

## üéÆ **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**

### 1. **–°–∏—Å—Ç–µ–º–∞ –≤–≤–æ–¥–∞ (Input Services)**
- **PlayerInputService** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–º —á–µ—Ä–µ–∑ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É/–º—ã—à—å
- **AiInputService** - –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ò–ò —Å NavMesh –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
- **IInputService** - –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –≤–≤–æ–¥–∞

### 2. **ActionObject System - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã**
- **ActionObject** - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- **TaskObject** - –æ–±—ä–µ–∫—Ç—ã —Å —Å–∏—Å—Ç–µ–º–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –¥–ª—è –∑–∞–¥–∞–Ω–∏–π
- **EvidenceObject** - —É–ª–∏–∫–∏ –¥–ª—è –¥–µ—Ç–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
- **PlayerInteractionObject** - –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏
- **RepairStationObject** - —Å—Ç–∞–Ω—Ü–∏–∏ –¥–ª—è —Ä–µ–º–æ–Ω—Ç–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å–∞–±–æ—Ç–∞–∂–∞

### 3. **Advanced AI System - –£–º–Ω—ã–π –ò–ò**
- **–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ NavMesh** –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è
- **–¶–µ–ª–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ** - –ø–æ–∏—Å–∫ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π
- **–†–æ–ª–µ–≤—ã–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã** - —Ä–∞–∑–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ—Å—Ç—å** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ñ–∞–∑—ã –∏–≥—Ä—ã

### 4. **Task & Progress System - –°–∏—Å—Ç–µ–º–∞ –∑–∞–¥–∞–Ω–∏–π**
- **–ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏** —Å –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—ã–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º
- **–ß–∞—Å—Ç–∏—á–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å** –ø—Ä–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π
- **–°–∞–±–æ—Ç–∞–∂** - –º–∞—Ñ–∏—è –º–æ–∂–µ—Ç —É–º–µ–Ω—å—à–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
- **–£—Å–ª–æ–≤–∏—è –ø–æ–±–µ–¥—ã** —á–µ—Ä–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á

### 5. **Async Actions - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**
- **UniTask** –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- **–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è** –¥–µ–π—Å—Ç–≤–∏–π
- **–ß–∞—Å—Ç–∏—á–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å** –ø—Ä–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–∏
- **–û—Ç–º–µ–Ω–∞ –¥–µ–π—Å—Ç–≤–∏–π** —á–µ—Ä–µ–∑ CancellationToken

## üéØ **–¢–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π (ActionType)**

```csharp
Kill        // –£–±–∏–π—Å—Ç–≤–æ (–ú–∞—Ñ–∏—è ‚Üí –î—Ä—É–≥–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏)
Investigate // –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ (–î–µ—Ç–µ–∫—Ç–∏–≤ ‚Üí –£–ª–∏–∫–∏/–¢—Ä—É–ø—ã)
Repair      // –†–µ–º–æ–Ω—Ç (–ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–µ ‚Üí –°—Ç–∞–Ω—Ü–∏–∏)
Sabotage    // –°–∞–±–æ—Ç–∞–∂ (–ú–∞—Ñ–∏—è ‚Üí –°—Ç–∞–Ω—Ü–∏–∏)
Interact    // –û–±—â–µ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
Hide        // –°–ø—Ä—è—Ç–∞—Ç—å —Ç–µ–ª–æ (–ú–∞—Ñ–∏—è ‚Üí –¢—Ä—É–ø—ã)  
Report      // –°–æ–æ–±—â–∏—Ç—å –æ –Ω–∞—Ö–æ–¥–∫–µ (–í—Å–µ ‚Üí –¢—Ä—É–ø—ã)
```

## ü§ñ **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ò–ò**

### **–ù–∞–≤–∏–≥–∞—Ü–∏—è NavMesh**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ NavMeshAgent** –¥–ª—è –±–æ—Ç–æ–≤
- **–ü–æ–∏—Å–∫ –ø—É—Ç–∏** –∫ —Ü–µ–ª–µ–≤—ã–º –æ–±—ä–µ–∫—Ç–∞–º
- **–°–ª—É—á–∞–π–Ω–æ–µ –±–ª—É–∂–¥–∞–Ω–∏–µ** –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ü–µ–ª–µ–π
- **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ –∑–æ–Ω–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è** —Å –æ–±—ä–µ–∫—Ç–∞–º–∏

### **–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –ø–æ —Ä–æ–ª—è–º**
```csharp
–ú–∞—Ñ–∏—è:     Kill ‚Üí Sabotage ‚Üí Hide
–î–µ—Ç–µ–∫—Ç–∏–≤:  Investigate ‚Üí Report  
–ì—Ä–∞–∂–¥–∞–Ω–∏–Ω: Repair ‚Üí Interact ‚Üí Report
```

### **–ü–æ–∏—Å–∫ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫** –±–ª–∏–∂–∞–π—à–∏—Ö –∑–∞–¥–∞—á –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ—Å—Ç—å** –∑–∞–¥–∞—á –Ω–∞–¥ —Å–ª—É—á–∞–π–Ω—ã–º –¥–≤–∏–∂–µ–Ω–∏–µ–º
- **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** –º–∞—Ä—à—Ä—É—Ç–æ–≤
- **–ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º** –Ω–∞ —É—Ä–æ–≤–Ω–µ

### **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ**
```
–î–µ–Ω—å:   –ú–∞—Ñ–∏—è –æ—Å—Ç–æ—Ä–æ–∂–Ω–∞, –î–µ—Ç–µ–∫—Ç–∏–≤—ã –∞–∫—Ç–∏–≤–Ω—ã, –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–µ —Ä–∞–±–æ—Ç–∞—é—Ç
–ù–æ—á—å:   –ú–∞—Ñ–∏—è –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Å—Å–∏–≤–Ω—ã
–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ: –í—Å–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è
```

## üèóÔ∏è **–°–∏—Å—Ç–µ–º–∞ –æ–±—ä–µ–∫—Ç–æ–≤**

### **ActionObject (–±–∞–∑–æ–≤—ã–π)**
```csharp
// –û—Å–Ω–æ–≤–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
ActionType actionType;           // –¢–∏–ø –¥–µ–π—Å—Ç–≤–∏—è
List<Role> allowedRoles;        // –ö—Ç–æ –º–æ–∂–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å
float interactionRange;         // –†–∞–¥–∏—É—Å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
float actionDuration;           // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏—è
bool isOneTimeUse;             // –û–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

// –°–æ–±—ã—Ç–∏—è
OnActionStarted    // –ù–∞—á–∞–ª–æ –¥–µ–π—Å—Ç–≤–∏—è
OnActionCompleted  // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è  
OnActionInterrupted // –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
```

### **TaskObject (–∑–∞–¥–∞—á–∏ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º)**
```csharp
// –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
int currentProgress;    // –¢–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å (0-100)
int maxProgress;       // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å
int progressPerAction; // –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞ –æ–¥–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ

// –°–æ–±—ã—Ç–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
OnProgressChanged  // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
OnTaskCompleted   // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏

// –ú–µ—Ç–æ–¥—ã
AddProgress(int amount)      // –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
Sabotage(int damage)        // –°–∞–±–æ—Ç–∏—Ä–æ–≤–∞—Ç—å (—É–º–µ–Ω—å—à–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å)
GetTotalTaskProgress()      // –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –≤—Å–µ—Ö –∑–∞–¥–∞—á
```

### **RepairStationObject (—Ä–µ–º–æ–Ω—Ç–Ω—ã–µ —Å—Ç–∞–Ω—Ü–∏–∏)**
```csharp
// –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
string stationType;        // –¢–∏–ø —Å—Ç–∞–Ω—Ü–∏–∏ (Engine, Lights, etc.)
bool canBeSabotaged;      // –ú–æ–∂–Ω–æ –ª–∏ —Å–∞–±–æ—Ç–∏—Ä–æ–≤–∞—Ç—å
int sabotageAmount;       // –£—Ä–æ–Ω –æ—Ç —Å–∞–±–æ—Ç–∞–∂–∞

// –†–æ–ª–µ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
–ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–µ: –ß–∏–Ω—è—Ç (+15% –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞ 3 —Å–µ–∫)
–ú–∞—Ñ–∏—è:       –°–∞–±–æ—Ç–∏—Ä—É—é—Ç (-20% –ø—Ä–æ–≥—Ä–µ—Å—Å–∞)
```

## ‚öôÔ∏è **–§–∏–∑–∏–∫–∞ –∏ –¥–≤–∏–∂–µ–Ω–∏–µ**

### **Dual Movement System**
- **CharacterController** –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤ (—Ñ–∏–∑–∏–∫–∞, –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—è, –ø—Ä—ã–∂–∫–∏)
- **NavMeshAgent** –¥–ª—è –±–æ—Ç–æ–≤ (—É–º–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è, –æ–±—Ö–æ–¥ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ NavMeshAgent**
```csharp
speed: 3.5f (5.25f –ø—Ä–∏ –±–µ–≥–µ)
acceleration: 8f
angularSpeed: 120f
stoppingDistance: 0.1f
radius: 0.5f
height: 2f
```

### **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –∞–Ω–∏–º–∞—Ç–æ—Ä–æ–º**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∞–Ω–∏–º–∞—Ü–∏–∏
- **–§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å** –¥–ª—è NavMeshAgent
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–∑–µ–º–ª–µ–Ω–∏—è** –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–≤–∏–∂–µ–Ω–∏—è

## üéÆ **–¶–∏–∫–ª –∏–≥—Ä—ã –∏ –ø–æ–±–µ–¥–∞**

### **–£—Å–ª–æ–≤–∏—è –ø–æ–±–µ–¥—ã**
```
–ú–∞—Ñ–∏—è –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞—Ñ–∏–∏ ‚â• –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–∏—Ä–Ω—ã—Ö
  
–ú–∏—Ä–Ω—ã–µ –≤—ã–∏–≥—Ä—ã–≤–∞—é—Ç:
- –í—Å—è –º–∞—Ñ–∏—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –ò–õ–ò
- –í—ã–ø–æ–ª–Ω–µ–Ω–æ N –∑–∞–¥–∞—á –ò–õ–ò  
- –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–¥–∞—á ‚â• 80%
```

### **–§–∞–∑—ã –∏–≥—Ä—ã**
```
üåû –î–µ–Ω—å (120 —Å–µ–∫):   –†–µ–º–æ–Ω—Ç –∞–∫—Ç–∏–≤–µ–Ω, —Å–∞–±–æ—Ç–∞–∂ –¥–æ—Å—Ç—É–ø–µ–Ω
üåô –ù–æ—á—å (60 —Å–µ–∫):    –£–±–∏–π—Å—Ç–≤–∞, —Å–∞–±–æ—Ç–∞–∂ –æ—Ç–∫–ª—é—á–µ–Ω  
üó≥Ô∏è –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ (30 —Å–µ–∫): –û–±—Å—É–∂–¥–µ–Ω–∏–µ, –¥–≤–∏–∂–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ
```

### **–ú–µ—Ö–∞–Ω–∏–∫–∏ —É–±–∏–π—Å—Ç–≤–∞ –∏ —É–ª–∏–∫**
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —É–ª–∏–∫–∏** —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ —É–±–∏–π—Å—Ç–≤–∞—Ö
- **–°–æ–∫—Ä—ã—Ç–∏–µ —É–ª–∏–∫** –º–∞—Ñ–∏–µ–π
- **–†–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ** –¥–µ—Ç–µ–∫—Ç–∏–≤–∞–º–∏
- **–°–æ–æ–±—â–µ–Ω–∏—è** –æ –Ω–∞—Ö–æ–¥–∫–∞—Ö

## üõ†Ô∏è **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (UniTask)**

### **–ü—Ä–µ—Ä—ã–≤–∞–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**
```csharp
// –î–ª–∏—Ç–µ–ª—å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
await UniTask.Delay(actionDuration * 1000, cancellationToken);

// –ü—Ä–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–∏ - —á–∞—Å—Ç–∏—á–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å
catch (OperationCanceledException) {
    task.AddProgress(progressPerAction * 0.5f);
}
```

### **–°–∏—Å—Ç–µ–º–∞ –æ—Ç–º–µ–Ω—ã**
- **CancellationTokenSource** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–º–µ–Ω–∞** –ø—Ä–∏ —Å–º–µ–Ω–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **Graceful –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ** —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

## üìä **API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

### **ActionObject API**
```csharp
// –ü–æ–∏—Å–∫ –æ–±—ä–µ–∫—Ç–æ–≤
ActionObject.FindNearestActionObject(position, role, actionType)
ActionObject.FindActionObjectsInRange(position, range, role)

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
object.CanInteract(character)
object.StartAction(character)
object.CompleteAction(character)
object.InterruptAction(character)
```

### **TaskObject API**
```csharp
// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º
task.AddProgress(amount)
task.RemoveProgress(amount) 
task.Sabotage(damage)

// –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
TaskObject.GetTotalTaskProgress()
TaskObject.GetCompletedTasksCount()
TaskObject.FindNearestIncompleteTask(position, role)
```

### **AI Management API**
```csharp
// –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ò–ò
ai.GetCurrentTarget()        // –¢–µ–∫—É—â–∞—è —Ü–µ–ª—å
ai.GetCurrentTask()         // –¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞
ai.HasTarget                // –ï—Å—Ç—å –ª–∏ —Ü–µ–ª—å
ai.IsMovingToTarget        // –î–≤–∏–∂–µ—Ç—Å—è –ª–∏ –∫ —Ü–µ–ª–∏

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º
ai.SetMovementActive(bool)
ai.ForceAction()
ai.SetActionInterval(float)
ai.SetAggressiveness(float)
```

### **GameplayManager API**
```csharp
// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä—ã
manager.GetTaskProgress()           // –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–¥–∞—á %
manager.GetCompletedTasksCount()   // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
manager.GetAlivePlayersCount()     // –ñ–∏–≤—ã–µ –∏–≥—Ä–æ–∫–∏
manager.GetAliveMafiaCount()       // –ñ–∏–≤–∞—è –º–∞—Ñ–∏—è
manager.GetAliveInnocentsCount()   // –ñ–∏–≤—ã–µ –º–∏—Ä–Ω—ã–µ

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–π
manager.KillCharacter(character)
manager.ForcePhaseChange()
manager.RegisterCharacter(character)
```

## üé® **–í–∏–∑—É–∞–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**

### **Gizmos –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏**
- **–ó–µ–ª–µ–Ω—ã–µ —Å—Ñ–µ—Ä—ã** - –¥–æ—Å—Ç—É–ø–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
- **–ö—Ä–∞—Å–Ω—ã–µ —Å—Ñ–µ—Ä—ã** - –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã  
- **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã** –Ω–∞–¥ TaskObject
- **–†–∞–¥–∏—É—Å—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è** –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ

### **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- **–î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏** –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –ò–ò
- **–°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π**
- **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** –∑–∞–¥–∞—á
- **–°–æ–±—ã—Ç–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞**

## üöÄ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**

### **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**
- **Object pooling** –¥–ª—è —á–∞—Å—Ç–æ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –ø–æ–∏—Å–∫–∞
- **–õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** NavMeshAgent
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ Update —Ü–∏–∫–ª—ã** —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
- **–°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π** –≤–º–µ—Å—Ç–æ –ø—Ä—è–º—ã—Ö —Å—Å—ã–ª–æ–∫
- **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- **–õ–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ** –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –¥–µ–π—Å—Ç–≤–∏–π

## üìã **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Ä–æ–≤–Ω—è**
1. –î–æ–±–∞–≤—å—Ç–µ **NavMesh** –Ω–∞ —É—Ä–æ–≤–µ–Ω—å (Window ‚Üí AI ‚Üí Navigation)
2. –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ **RepairStationObject** –¥–ª—è –∑–∞–¥–∞–Ω–∏–π
3. –î–æ–±–∞–≤—å—Ç–µ **EvidenceObject** –¥–ª—è —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π  
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ **GameplayManager** –Ω–∞ —Å—Ü–µ–Ω—É
5. –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —á–µ—Ä–µ–∑ **CharacterViewFactory**

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç–∞–Ω—Ü–∏–π**
```csharp
// –í –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–µ RepairStationObject
Station Type: "Engine"          // –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏
Max Progress: 100               // –ü–æ–ª–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å
Progress Per Action: 15         // –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞ –¥–µ–π—Å—Ç–≤–∏–µ  
Action Duration: 3.0f          // –í—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–∏—è
Can Be Sabotaged: true         // –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–∞–±–æ—Ç–∞–∂–∞
Sabotage Amount: 20            // –£—Ä–æ–Ω –æ—Ç —Å–∞–±–æ—Ç–∞–∂–∞
```

### **–°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π**
```csharp
// –ò–≥—Ä–æ–∫
var player = factory.CreatePlayer(spawnPoint, Role.Civilian);
manager.RegisterCharacter(player);

// –ë–æ—Ç
var bot = factory.CreateBot(spawnPoint, Role.Mafia);  
manager.RegisterCharacter(bot);
```

## üîÆ **–ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è**

- **–°–ª–æ–∂–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ò–ò** —Å –º–∞—à–∏–Ω–Ω—ã–º –æ–±—É—á–µ–Ω–∏–µ–º
- **–ü—Ä–æ—Ü–µ–¥—É—Ä–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** –∑–∞–¥–∞—á –∏ —É—Ä–æ–≤–Ω–µ–π
- **–°–∏—Å—Ç–µ–º–∞ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏** –¥–ª—è –ò–ò –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π
- **–í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã** –¥–ª—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
- **–ó–≤—É–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞** —Å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∑–≤—É–∫–æ–º
- **–°–µ—Ç–µ–≤–æ–π –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä** —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π —Å–æ—Å—Ç–æ—è–Ω–∏–π

---

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!** üéâ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –≥–µ–π–º–ø–ª–µ–π —Å —É–º–Ω—ã–º –ò–ò, –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–µ–≥–æ –æ–ø—ã—Ç–∞ –∏–≥—Ä—ã. 